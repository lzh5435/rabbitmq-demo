package test.liuzehua.rabbitmqdemo.singlequeue;import com.rabbitmq.client.Channel;import com.rabbitmq.client.Connection;import com.rabbitmq.client.ConnectionFactory;import com.rabbitmq.client.MessageProperties;import org.junit.jupiter.api.Test;import java.io.IOException;import java.util.concurrent.TimeoutException;/** * @author liuzehua * 2020/6/6 **/public class Provider {    /**     * 消息生产者     */    @Test    void testSendMessage() throws IOException, TimeoutException {        // 创建连接工厂        ConnectionFactory connectionFactory =new ConnectionFactory();        // 设置主机ip        connectionFactory.setHost("192.168.81.166");        // 设置 端口 内部数据传输的端口        connectionFactory.setPort(5672);        // 设置虚拟主机        connectionFactory.setVirtualHost("/");        // 设置 账号密码        connectionFactory.setUsername("name");        connectionFactory.setPassword("passwd");        //获取连接对象        Connection connection = connectionFactory.newConnection();        //创建 通道        Channel channel = connection.createChannel();        /**         * 创建队列         * https://www.jianshu.com/p/2dc22126b2ae         * queueDeclare (String queue , boolean durable , boolean exclusive , boolean autoDelete , Map arguments)         *              队列名称  是否持久化  是否排他 ，是否自动删除，附加参数         */        channel.queueDeclare("hello",true,false,false,null);        //发布消息        // 参数1 交换机名称  队列名称  消息持久化   传递的信息        channel.basicPublish("","hello",MessageProperties.PERSISTENT_TEXT_PLAIN,"hello nihao rabbitmq".getBytes());        channel.close();        connection.close();    }}